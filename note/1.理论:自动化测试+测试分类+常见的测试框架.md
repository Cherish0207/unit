dir: 6 期视频/vue/2020 架构课 Vue 阶段/第 5 章 单元测试篇/
note: http://zhufengpeixun.com/jg-vue/vue-apply/unit-1.html

## 自动化测试

- 每次写完提交代码后, 实现自动测试, 测试代码是否能通过测试

- 项目迭代较快的业务代码，可能不会去写测试: 编写测试会浪费大量时间, 测试的代码会比源代码更多一些(无聊、感觉没有意义)
- 如果是编写了一个类库(开发类库、组件库、框架): 别人提交代码可能会影响核心逻辑，此时就必须要有一个单元测试了，来保证核心逻辑不受影响 (比如后面的 ui 组件库)
  可以先编写一套测试，每提交代码都进行测试，防止别人改了代码功能挂掉

  > 好处

- 快速定位 bug
- 有测试的代码,一般代码质量比较高(你要自己测试自己的代码->你肯定写的代码容易测试): 有些甲方可能会要求写测试用例，达到 80%以上才可以
- 増强代码的维护性(测试就可以认为是一个潜在的文档 )：比如 vue 中的 mergeOptions 的测试，提升代码的阅读

## 测试分类

- 黑盒测试/功能测试: 主要验证功能是否 ok
- 白盒测试: 需要了解代码的具体逻辑--程序员写的一般是白盒测试

- 单元测试: 以最小的单元来实现测试功能,针对小的单元进行测试,一个组件,一个方法,一个模块)
- 集成测试: 放在一起进行测试，可能包含了多个单元测试
  Todo => Todoinput TodoList TodoItem

- TDD: 测试驱动开发 "先写测试再写代码": 比如写了一个工具包，里面有添加、删除等方法功能，先写测试再写代码,代码通过测试即可---> 写工具库的时候可能会用
- BDD: 行为驱动开发 根据用户的行为进行测试
  现在一般都是 BDD
  非常大型项目可能 e2e ，如监控当前 app 是否正常

## 常见的测试框架

- Karma: 提供真正的浏览器环境，可以把测试跑在真正的浏览器上
  --> 可以获取到样式、位置等
  --> 可以测试 ui 组件，比如轮播图
- mocha:
  - 测试框架，提供了一个测试环境,
  - 内置的 chai（断言库）、 sinon（mock 一些方法）。。
- Jest（facebook）:
  - 基于 jsdom 的，用 js 对象来模拟浏览器环境(缺陷就是不能测试样式相关的)
  - 不需要集成，默认具备断言库 chai sinon，
  - 0 配置，
  - 可以测试覆盖率。
    很方便，唯一的缺点是不能测样式；业务逻辑包括 node 里业务逻辑的测试首选 jest
    Karma 和 mocha 可以放在一起使用，
    > Jest= karam + mocha + chai

## 单元测试

> 单元测试:测试主体的功能,对一些不需要测试的东西进行一个 mock 即可

编写 vue 组件,会写几个单元测试

- vue 单元测试有单独的包:[vue-test/utils](vue-test-utils.vuejs.org/zh/guides/)，api 非常多
- 组件库: karam + mocha + chai + vue-test/utils
